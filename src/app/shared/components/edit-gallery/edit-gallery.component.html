<div class="property-container">
    <!-- Header Section -->
    <header class="header-section">
      <h1 class="page-title">{{ isEditing ? 'Edit Property' : 'Property Details' }}</h1>
      <div class="header-actions" *ngIf="!isEditing">
        <button class="edit-button" (click)="toggleEdit()">
          <i class="fas fa-edit"></i> Edit Property
        </button>
      </div>
    </header>

    <!-- Property Details Form -->
    <section class="details-section">
      <form [formGroup]="propertyForm" (ngSubmit)="onSubmit()" class="details-form">
        <div class="form-grid">
          <div class="form-group">
            <label for="title">Property Title</label>
            <input id="title" 
                   type="text" 
                   formControlName="title"
                   [readonly]="!isEditing"
                   class="form-input">
          </div>

          <div class="form-group">
            <label for="location">Location</label>
            <input id="location" 
                   type="text" 
                   formControlName="location"
                   [readonly]="!isEditing"
                   class="form-input">
          </div>

          <div class="form-group full-width">
            <label for="address">Address</label>
            <input id="address" 
                   type="text" 
                   formControlName="address"
                   [readonly]="!isEditing"
                   class="form-input">
          </div>

          <div class="form-group full-width">
            <label for="description">Description</label>
            <textarea id="description" 
                      formControlName="description"
                      [readonly]="!isEditing"
                      class="form-textarea"
                      rows="4"></textarea>
          </div>
        </div>

        <!-- Form Actions -->
        <div class="form-actions" *ngIf="isEditing">
          <button type="button" 
                  class="cancel-button" 
                  (click)="cancelEdit()">
            Cancel
          </button>
          <button type="submit" 
                  class="save-button" 
                  [disabled]="!propertyForm.valid">
            Save Changes
          </button>
        </div>
      </form>
    </section>
    
    <!-- Image Gallery -->
    <section class="image-gallery">
      <div class="gallery-grid">
        <div *ngFor="let image of property?.images; let i = index" 
             class="image-card">
          <div class="image-wrapper">
            <img [src]="image" [alt]="'Property image ' + (i + 1)">
            <div class="image-overlay">
              <div class="overlay-actions">
                <button class="action-btn primary-btn" 
                        (click)="setAsPrimary(i)"
                        [class.is-primary]="i === 0">
                  <i class="fas fa-star"></i>
                </button>
                <button class="action-btn delete-btn" (click)="deleteImage(i)">
                  <i class="fas fa-trash"></i>
                </button>
              </div>
              <button class="expand-btn" (click)="openImageViewer(i)">
                <i class="fas fa-expand"></i>
              </button>
            </div>
          </div>
        </div>

        <!-- Add Image Card -->
        <div *ngIf="isEditing" class="add-image-card" (click)="triggerImageUpload()">
          <div class="add-image-content">
            <i class="fas fa-plus-circle"></i>
            <span>Add Images</span>
          </div>
          <input #fileInput type="file" 
                 hidden multiple accept="image/*" 
                 (change)="onImageSelected($event)">
        </div>
      </div>
    </section>

    

    <!-- Image Viewer Modal -->
    <div class="modal" *ngIf="selectedImageIndex !== null">
      <div class="modal-overlay" (click)="closeImageViewer()"></div>
      <div class="modal-content">
        <button class="modal-close" (click)="closeImageViewer()">
          <i class="fas fa-times"></i>
        </button>
        <div class="modal-body">
          <img [src]="property?.images[selectedImageIndex]" 
               [alt]="'Property image ' + (selectedImageIndex + 1)">
          <div class="modal-navigation">
            <button *ngIf="selectedImageIndex > 0" 
                    class="nav-button prev" 
                    (click)="previousImage()">
              <i class="fas fa-chevron-left"></i>
            </button>
            <button *ngIf="selectedImageIndex < (property?.images.length || 0) - 1" 
                    class="nav-button next" 
                    (click)="nextImage()">
              <i class="fas fa-chevron-right"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>